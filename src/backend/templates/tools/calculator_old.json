{
  "id_prefix": "CalculatorComponent",
  "component_type": "CalculatorComponent",
  "display_name": "Calculator",
  "description": "Perform basic arithmetic operations",
  "icon": "calculator",
  "node": {
    "data": {
      "id": "CalculatorComponent-YmuTn",
      "node": {
        "base_classes": [
          "Data"
        ],
        "beta": false,
        "category": "tools",
        "conditional_paths": [],
        "custom_fields": {},
        "description": "Perform basic arithmetic operations on a given expression.",
        "display_name": "Calculator",
        "documentation": "",
        "edited": false,
        "field_order": [
          "expression"
        ],
        "frozen": false,
        "icon": "calculator",
        "key": "CalculatorComponent",
        "last_updated": "2026-01-05T16:51:15.581Z",
        "legacy": false,
        "lf_version": "1.2.0",
        "metadata": {
          "code_hash": "acbe2603b034",
          "dependencies": {
            "dependencies": [
              {
                "name": "lfx",
                "version": "0.2.1"
              }
            ],
            "total_dependencies": 1
          },
          "module": "lfx.components.utilities.calculator_core.CalculatorComponent"
        },
        "minimized": false,
        "output_types": [],
        "outputs": [
          {
            "allows_loop": false,
            "cache": true,
            "display_name": "Toolset",
            "group_outputs": false,
            "hidden": false,
            "loop_types": null,
            "method": "to_toolkit",
            "name": "component_as_tool",
            "options": null,
            "required_inputs": null,
            "selected": "Tool",
            "tool_mode": true,
            "types": [
              "Tool"
            ],
            "value": "__UNDEFINED__"
          }
        ],
        "pinned": false,
        "score": 0.001,
        "template": {
          "_frontend_node_flow_id": {
            "value": "668898e3-0608-4c29-a77f-2b73f0047378"
          },
          "_frontend_node_folder_id": {
            "value": "afe00a3b-7693-4a52-b169-bfcd32c8ec22"
          },
          "_type": "Component",
          "code": {
            "advanced": true,
            "dynamic": true,
            "fileTypes": [],
            "file_path": "",
            "info": "",
            "list": false,
            "load_from_db": false,
            "multiline": true,
            "name": "code",
            "password": false,
            "placeholder": "",
            "required": true,
            "show": true,
            "title_case": false,
            "type": "code",
            "value": "import ast\nimport operator\nfrom collections.abc import Callable\n\nfrom lfx.custom.custom_component.component import Component\nfrom lfx.inputs.inputs import MessageTextInput\nfrom lfx.io import Output\nfrom lfx.schema.data import Data\n\n\nclass CalculatorComponent(Component):\n    display_name = \"Calculator\"\n    description = \"Perform basic arithmetic operations on a given expression.\"\n    documentation: str = \"https://docs.langflow.org/calculator\"\n    icon = \"calculator\"\n\n    # Cache operators dictionary as a class variable\n    OPERATORS: dict[type[ast.operator], Callable] = {\n        ast.Add: operator.add,\n        ast.Sub: operator.sub,\n        ast.Mult: operator.mul,\n        ast.Div: operator.truediv,\n        ast.Pow: operator.pow,\n    }\n\n    inputs = [\n        MessageTextInput(\n            name=\"expression\",\n            display_name=\"Expression\",\n            info=\"The arithmetic expression to evaluate (e.g., '4*4*(33/22)+12-20').\",\n            tool_mode=True,\n        ),\n    ]\n\n    outputs = [\n        Output(display_name=\"Data\", name=\"result\", type_=Data, method=\"evaluate_expression\"),\n    ]\n\n    def _eval_expr(self, node: ast.AST) -> float:\n        \"\"\"Evaluate an AST node recursively.\"\"\"\n        if isinstance(node, ast.Constant):\n            if isinstance(node.value, int | float):\n                return float(node.value)\n            error_msg = f\"Unsupported constant type: {type(node.value).__name__}\"\n            raise TypeError(error_msg)\n        if isinstance(node, ast.Num):  # For backwards compatibility\n            if isinstance(node.n, int | float):\n                return float(node.n)\n            error_msg = f\"Unsupported number type: {type(node.n).__name__}\"\n            raise TypeError(error_msg)\n\n        if isinstance(node, ast.BinOp):\n            op_type = type(node.op)\n            if op_type not in self.OPERATORS:\n                error_msg = f\"Unsupported binary operator: {op_type.__name__}\"\n                raise TypeError(error_msg)\n\n            left = self._eval_expr(node.left)\n            right = self._eval_expr(node.right)\n            return self.OPERATORS[op_type](left, right)\n\n        error_msg = f\"Unsupported operation or expression type: {type(node).__name__}\"\n        raise TypeError(error_msg)\n\n    def evaluate_expression(self) -> Data:\n        \"\"\"Evaluate the mathematical expression and return the result.\"\"\"\n        try:\n            tree = ast.parse(self.expression, mode=\"eval\")\n            result = self._eval_expr(tree.body)\n\n            formatted_result = f\"{float(result):.6f}\".rstrip(\"0\").rstrip(\".\")\n            self.log(f\"Calculation result: {formatted_result}\")\n\n            self.status = formatted_result\n            return Data(data={\"result\": formatted_result})\n\n        except ZeroDivisionError:\n            error_message = \"Error: Division by zero\"\n            self.status = error_message\n            return Data(data={\"error\": error_message, \"input\": self.expression})\n\n        except (SyntaxError, TypeError, KeyError, ValueError, AttributeError, OverflowError) as e:\n            error_message = f\"Invalid expression: {e!s}\"\n            self.status = error_message\n            return Data(data={\"error\": error_message, \"input\": self.expression})\n\n    def build(self):\n        \"\"\"Return the main evaluation function.\"\"\"\n        return self.evaluate_expression\n"
          },
          "expression": {
            "_input_type": "MessageTextInput",
            "advanced": false,
            "display_name": "Expression",
            "dynamic": false,
            "info": "The arithmetic expression to evaluate (e.g., '4*4*(33/22)+12-20').",
            "input_types": [
              "Message"
            ],
            "list": false,
            "list_add_label": "Add More",
            "load_from_db": false,
            "name": "expression",
            "placeholder": "",
            "required": false,
            "show": true,
            "title_case": false,
            "tool_mode": true,
            "trace_as_input": true,
            "trace_as_metadata": true,
            "type": "str",
            "value": ""
          },
          "is_refresh": false,
          "tools_metadata": {
            "_input_type": "ToolsInput",
            "advanced": false,
            "display_name": "Actions",
            "dynamic": false,
            "info": "Modify tool names and descriptions to help agents understand when to use each tool.",
            "is_list": true,
            "list_add_label": "Add More",
            "name": "tools_metadata",
            "override_skip": false,
            "placeholder": "",
            "real_time_refresh": true,
            "required": false,
            "show": true,
            "title_case": false,
            "tool_mode": false,
            "trace_as_metadata": true,
            "track_in_telemetry": false,
            "type": "tools",
            "value": [
              {
                "args": {
                  "expression": {
                    "default": "",
                    "description": "The arithmetic expression to evaluate (e.g., '4*4*(33/22)+12-20').",
                    "title": "Expression",
                    "type": "string"
                  }
                },
                "description": "CalculatorComponent. evaluate_expression() - Perform basic arithmetic operations on a given expression.",
                "display_description": "CalculatorComponent. evaluate_expression() - Perform basic arithmetic operations on a given expression.",
                "display_name": "evaluate_expression",
                "name": "evaluate_expression",
                "status": true,
                "tags": [
                  "evaluate_expression"
                ]
              }
            ]
          }
        },
        "tool_mode": true
      },
      "selected_output": "component_as_tool",
      "showNode": true,
      "type": "CalculatorComponent"
    },
    "dragging": false,
    "id": "CalculatorComponent-YmuTn",
    "measured": {
      "height": 218,
      "width": 320
    },
    "position": {
      "x": 1233.166256931297,
      "y": 514.7544001650839
    },
    "selected": false,
    "type": "genericNode"
  },
  "edge_output": {
    "name": "component_as_tool",
    "output_types": [
      "Tool"
    ]
  }
}